<style>
    body {
        font-family: monospace;
        font-size: 18px;
    }
    #scene {
        position: absolute;
        top: 0px;
        left: 0px;
        width: 100%;
        height: 100%;
        background-color: #fdf6e3;
    }
    #stage {
        position: absolute;
        top: 20px;
        right: 20px;
        width: 120px;
        height: 90vh;
        overflow-x: scroll;
        border: 2px dashed;
        z-index: 2;
        background-color: #eee8d5;
    }
    .nodeInStage {
        position: relative;
        margin: 5px;
    }
    .nodeInScene {
        position: absolute;
    }
</style>

<div id="scene"></div>
<div id="stage"></div>

<script src="./math.js"></script>
<script src="./canvas.js"></script>
<script>

const scene = new Scene(document.getElementById("scene"));
const stage = new Stage(document.getElementById("stage"));

let ws = new WebSocket("ws://localhost:1234/ws");
ws.onmessage = e => {
    const {files, layout} = JSON.parse(e.data);

    files.map(d => {
        stage.addNode(new Node({
            x: 0,
            y: 0,
            z: 1,
            w: 200,
            path: d.path,
            type: d.type,
        }));
    })
}
ws.onopen = e => {
  ws.send("initialize");
}

</script>
